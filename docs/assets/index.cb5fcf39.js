import{o as l,c as i,a as r,W as b,S,U as B,b as D,w as $,q as y,t as H,ak as V,al as z,F as N,r as R,x as j,am as O,d as T,j as m,A as k,V as x,g as A,O as P,P as U}from"./index.affbe669.js";import{E as q}from"./index.7da3bec1.js";import{_ as I}from"./plugin-vue_export-helper.21dcd24c.js";const W={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"};function G(e,t){return l(),i("svg",W,[...t[0]||(t[0]=[r("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896a448 448 0 0 1 0-896M288 512a38.4 38.4 0 0 0 38.4 38.4h371.2a38.4 38.4 0 0 0 0-76.8H326.4A38.4 38.4 0 0 0 288 512"},null,-1)])])}var J={name:"ep-remove-filled",render:G};const K={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"};function Q(e,t){return l(),i("svg",K,[...t[0]||(t[0]=[r("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896a448 448 0 0 1 0-896m-38.4 409.6H326.4a38.4 38.4 0 1 0 0 76.8h147.2v147.2a38.4 38.4 0 0 0 76.8 0V550.4h147.2a38.4 38.4 0 0 0 0-76.8H550.4V326.4a38.4 38.4 0 1 0-76.8 0z"},null,-1)])])}var Z={name:"ep-circle-plus-filled",render:Q};const ee={class:"topology-item-wrap"},te={class:"topology-card-column"},ae={class:"header"},ne={class:"body"},oe={key:0,class:"topology-card-column next-column"};function ue(e,t,n,s,_,f){const a=Z,u=J,c=q,p=b("TopologyItem",!0);return l(),i("div",ee,[r("div",te,[r("div",{class:"topology-card",onMousedown:t[0]||(t[0]=S(()=>{},["stop"]))},[r("div",ae,B(e.treeData.label),1),D(c,{size:20,onClick:e.expandChange,color:"#ffffff",class:H({loading:e.isLoading})},{default:$(()=>[e.treeData.expand?(l(),y(u,{key:1})):(l(),y(a,{key:0}))]),_:1},8,["onClick","class"]),r("div",ne,B(e.treeData.content),1)],32)]),D(O,{duration:300,name:"scale"},{default:$(()=>[e.treeData.children&&e.treeData.children.length?V((l(),i("div",oe,[(l(!0),i(N,null,R(e.treeData.children,(d,v)=>(l(),y(p,{data:d,key:v},null,8,["data"]))),128))],512)),[[z,e.treeData.expand]]):j("",!0)]),_:1})])}const le=T({name:"TopologyItem",props:{data:{type:Object,default:()=>({})}},setup(e){const t=m(!1),n=k({label:e.data.label,content:e.data.content,children:e.data.children||[],expand:e.data.expand});return{isLoading:t,treeData:n,expandChange:()=>{n.expand=!n.expand,n.children=[],n.expand&&(t.value=!0,setTimeout(()=>{n.children=Array.from(new Array(Math.ceil(Math.random()*3))).map((_,f)=>({label:`\u968F\u673A\u76EE\u5F55${Date.now()}`,content:"\u4ECA\u5929\u5929\u5929\u6C14\u771F\u6B63\u597D\uFF0C\u6211\u548C\u5C0F\u660E\u62A2\u94F6\u884C\u3002\u6211\u62A2\u91D1\u4ED6\u62A2\u94F6\uFF0C\u4E0D\u6B62\u8C01\u62E8\u4E86110\u3002\u6211\u8DD1\u5F97\u5FEB\uFF0C\u4ED6\u8DD1\u5F97\u6162\uFF0C\u4ED6\u88AB\u6293\u5230\u4E86\u8B66\u5BDF\u5C40\u3002\u6211\u5728\u5BB6\u91CC\u5403\u9992\u5934\uFF0C\u4ED6\u5728\u7262\u91CC\u5403\u62F3\u5934\uFF0C\u6211\u5728\u5BB6\u91CC\u6570\u91D1\u5E01\uFF0C\u4ED6\u5728\u7262\u91CC\u7B49\u67AA\u6BD9\u3002\u6211\u7684\u91D1\u5E01\u6570\u5B8C\u4E86\uFF0C\u4ED6\u7684\u5C0F\u547D\u6CA1\u6709\u4E86\u3002",expand:!1,children:[]})),t.value=!1},1500*Math.random()))}}}});var se=I(le,[["render",ue],["__scopeId","data-v-15154cf9"]]);const re={class:"topology-wrapper"};function de(e,t,n,s,_,f){const a=b("TopologyItem");return l(),i("div",re,[r("div",{class:"topology-box",ref:"El",onMousewheel:t[0]||(t[0]=S((...u)=>e.mousewheelHandle&&e.mousewheelHandle(...u),["prevent","stop"])),onMousedown:t[1]||(t[1]=(...u)=>e.addMouseMove&&e.addMouseMove(...u))},[r("div",{class:"translate-wrap",style:x(e.translateStyle)},[D(a,{data:e.treeData,style:x(e.scaleStyle)},null,8,["data","style"])],4)],544)])}const ie=T({name:"Topology",components:{TopologyItem:se},setup(e){const t=k({label:"1\u7EA7\u76EE\u5F55",content:"\u9876\u5C42content",expand:!1}),n=m(100),s=m(100),_=A(()=>`margin-left: ${n.value}px; margin-top: ${s.value}px`),f=A(()=>`zoom: ${a.value}`),a=m(1);var u=.05,c=2,p=.2;const d=m(null);var v=0,C=0;P(()=>{document.addEventListener("mouseup",F)}),U(()=>{document.removeEventListener("mouseup",F)});const X=o=>{let g=o.currentTarget.getBoundingClientRect();if(o.wheelDelta){let h=o.clientX-n.value-g.left,L=o.clientY-s.value-g.top,w=h/a.value*u,M=L/a.value*u;o.wheelDelta>0?(n.value-=a.value>=c?0:w,s.value-=a.value>=c?0:M,a.value+=u):(n.value+=a.value<=p?0:w,s.value+=a.value<=p?0:M,a.value-=u,a.value=Math.min(c,Math.max(a.value,p)))}},Y=o=>{d.value.style.cursor="grabbing",v=o.clientX,C=o.clientY,d.value.addEventListener("mousemove",E,!1),document.onselectstart=()=>!1,document.ondragstart=()=>!1},F=()=>{d.value.style.cursor="",d.value.removeEventListener("mousemove",E,!1),document.onselectstart=null,document.ondragstart=null},E=o=>{o.preventDefault();let g=o.clientX-v,h=o.clientY-C;n.value+=g,s.value+=h,v=o.clientX,C=o.clientY};return{El:d,treeData:t,translateStyle:_,scaleStyle:f,mousewheelHandle:X,addMouseMove:Y}}});var me=I(ie,[["render",de],["__scopeId","data-v-e1f0dbce"]]);export{me as default};
