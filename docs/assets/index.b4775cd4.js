import{d as M,j as B,ak as j,c as A,b as a,w as c,a as i,F as H,r as N,aK as S,o as h,f as _,U as x,e as y}from"./index.b16c7db2.js";import{E as T}from"./el-image-viewer.8fa94581.js";import{E as K,a as $}from"./el-form-item.c07deb76.js";import{E as G}from"./el-input.54e54da5.js";import{E as P}from"./el-input-number.877d1176.js";import{E as Y}from"./el-progress.8167d613.js";import{E as Z}from"./el-button.553af998.js";import{A as J,x as Q}from"./index.9952b6e6.js";import{_ as W}from"./plugin-vue_export-helper.21dcd24c.js";import"./index.0944410b.js";import"./focus-trap.69a93002.js";import"./index.78b0e0f0.js";import"./index.b8ef152f.js";import"./event.635b5201.js";import"./typescript.35cbd032.js";import"./debounce.138a5c2c.js";import"./toNumber.cecc9d5a.js";import"./use-form-common-props.4cfadbea.js";import"./_baseClone.ee7beaf3.js";import"./icon.14bc0150.js";import"./index.5468843d.js";const U=r=>{if(r===0||typeof r=="string"&&parseFloat(r)===0)return"0 B";if(r<1||typeof r=="string"&&parseFloat(r)<1)return r+"B";var s=1024,v=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],p=Math.floor(Math.log(r)/Math.log(s)),F=r/Math.pow(s,p);return v[p]?F.toFixed(2)+" "+v[p]:(F/1e3).toFixed(1)+" B"};const X={class:"wrapper","element-loading-text":"\u56FE\u7247\u538B\u7F29\u4E2D..."},O={class:"img-item-ul"},uu={class:"info-text"},eu={class:"info-text"},tu={class:"info-text"},lu=M({__name:"index",setup(r){const s=B([]),v=B([]),p=B(!1),F=B(.2),f=B(""),g=B(""),V=(t,u)=>{s.value=u,p.value=!0,L(t.raw,{quality:F.value,width:~~f.value,height:~~g.value},l=>{let e=b(l,t.name);v.value.push({...t,originSize:U(t.size),size:U(e.size),url:URL.createObjectURL(e),quality:F.value}),p.value=!1})},k=(t,u)=>{s.value=u},z=t=>{s.value.splice(t,1),v.value.splice(t,1)},I=t=>{let u=document.createElement("a");u.setAttribute("download",""),u.setAttribute("href",t.url),u.click()},L=(t,u,l)=>{let e=new FileReader;e.readAsDataURL(t),e.onload=()=>{let d=e.result;R(d,u,l)}},R=(t,u,l)=>{let e=new Image;e.src=t,e.onload=()=>{let d=u.quality,n=u.width||e.width,m=u.height||(u.width?u.width/(e.width/e.height):"")||e.height,E=document.createElement("canvas"),C=E.getContext("2d");E.width=n,E.height=m,C.drawImage(e,0,0,n,m);let w=E.toDataURL("image/jpeg",d);l(w)}},b=(t,u)=>{let l=t.split(","),e=l[0].match(/:(.*?);/)[1],d=atob(l[1]),n=d.length,m=new Uint8Array(n);for(;n--;)m[n]=d.charCodeAt(n);return new File([m],u,{type:e})};return(t,u)=>{const l=Z,e=Y,d=P,n=K,m=G,E=$,C=T,w=S("loading");return j((h(),A("div",X,[a(e,{class:"upload-demo",ref:"upload",action:"","list-type":"picture-card",accept:"image/*","file-list":s.value,"auto-upload":!1,"on-change":V,"on-remove":k},{trigger:c(()=>[a(l,{type:"primary"},{default:c(()=>[...u[3]||(u[3]=[_("\u9009\u62E9\u5F85\u538B\u7F29\u56FE\u7247",-1)])]),_:1})]),tip:c(()=>[...u[4]||(u[4]=[i("div",{class:"el-upload__tip"},"\u56FE\u7247\u5C06\u538B\u7F29\u4E3A image/jpeg \u683C\u5F0F",-1)])]),_:1},8,["file-list"]),a(E,null,{default:c(()=>[a(n,{label:"\u56FE\u7247\u8D28\u91CF"},{default:c(()=>[a(d,{modelValue:F.value,"onUpdate:modelValue":u[0]||(u[0]=o=>F.value=o),"controls-position":"right",min:0,max:1,step:.1,placeholder:"\u8BF7\u8F93\u51650-1\u4E4B\u95F4\u7684\u6570\u503C"},null,8,["modelValue"]),u[5]||(u[5]=i("div",null,"\u8BF7\u8F93\u51650-1\u4E4B\u95F4\u7684\u6570\u503C\uFF0C\u5982\u679C\u8D85\u51FA\u53D6\u503C\u8303\u56F4\uFF0C\u5C06\u4F1A\u4F7F\u7528\u9ED8\u8BA4\u503C 0.92\u3002",-1))]),_:1}),a(n,{label:"\u56FE\u7247\u5BBD\u5EA6"},{default:c(()=>[a(m,{modelValue:f.value,"onUpdate:modelValue":u[1]||(u[1]=o=>f.value=o),placeholder:"\u8BF7\u8F93\u5165\u5408\u7406\u50CF\u7D20\u6570\u503C"},null,8,["modelValue"]),u[6]||(u[6]=i("div",null,"\u4E0D\u5408\u7406\u503C\u5C06\u4F7F\u7528\u56FE\u7247\u9ED8\u8BA4\u5BBD\u5EA6\uFF0C\u53EA\u8BBE\u7F6E\u5BBD\u5EA6\u65F6\u9AD8\u5EA6\u5C06\u6309\u6BD4\u4F8B\u7F29\u653E",-1))]),_:1}),a(n,{label:"\u56FE\u7247\u9AD8\u5EA6"},{default:c(()=>[a(m,{modelValue:g.value,"onUpdate:modelValue":u[2]||(u[2]=o=>g.value=o),placeholder:"\u8BF7\u8F93\u5165\u5408\u7406\u50CF\u7D20\u6570\u503C"},null,8,["modelValue"]),u[7]||(u[7]=i("div",null,"\u4E0D\u5408\u7406\u503C\u5C06\u4F7F\u7528\u56FE\u7247\u9ED8\u8BA4\u9AD8\u5EA6",-1))]),_:1})]),_:1}),u[11]||(u[11]=i("div",{style:{clear:"both",color:"#000000"}},"\u70B9\u51FB\u56FE\u7247\u67E5\u770B\uFF0C\u5DE6\u53F3\u5207\u6362\u5BF9\u6BD4\u539F\u56FE",-1)),i("ul",O,[(h(!0),A(H,null,N(v.value,(o,D)=>(h(),A("li",{class:"img-item",key:D},[a(C,{src:o.url,"preview-src-list":[o.url,s.value[D].url]},null,8,["src","preview-src-list"]),i("div",uu,[u[8]||(u[8]=_("\u539F\u59CB\u5927\u5C0F\uFF1A",-1)),i("span",null,x(o.originSize),1)]),i("div",eu,[u[9]||(u[9]=_("\u538B\u7F29\u8D28\u91CF\uFF1A",-1)),i("span",null,x(o.quality),1)]),i("div",tu,[u[10]||(u[10]=_("\u538B\u7F29\u540E\u5927\u5C0F\uFF1A",-1)),i("span",null,x(o.size),1)]),a(l,{type:"primary",icon:y(J),circle:"",onClick:q=>I(o)},null,8,["icon","onClick"]),a(l,{type:"danger",icon:y(Q),circle:"",onClick:q=>z(D)},null,8,["icon","onClick"])]))),128))])])),[[w,p.value]])}}});var hu=W(lu,[["__scopeId","data-v-7120e461"]]);export{hu as default};
