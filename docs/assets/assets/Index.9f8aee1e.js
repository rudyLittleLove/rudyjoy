import{o as M,c as k,a as I,d as Z,j as V,A as Q,g as X,O as Y,ak as ee,b as v,w as E,t as q,aK as oe,q as S,a1 as ne,e as O,F as z,r as j,x as J,f as ae}from"./index.b16c7db2.js";import{E as ue,a as le}from"./el-select.68b9edff.js";import{E as te,a as ie}from"./el-form-item.c07deb76.js";import{E as re}from"./el-button.553af998.js";import{E as se}from"./el-input.54e54da5.js";import{q as pe,g as de,p as ce}from"./index.9952b6e6.js";import{_ as fe}from"./plugin-vue_export-helper.21dcd24c.js";import{E as me}from"./index.78b0e0f0.js";import"./index.b8ef152f.js";import"./event.635b5201.js";import"./index.0944410b.js";import"./focus-trap.69a93002.js";import"./use-form-common-props.4cfadbea.js";import"./strings.66a2ff32.js";import"./toNumber.cecc9d5a.js";import"./icon.14bc0150.js";import"./_baseClone.ee7beaf3.js";import"./index.5468843d.js";import"./typescript.35cbd032.js";var ve=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};const ge={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"};function Ae(x,g){return M(),k("svg",ge,[...g[0]||(g[0]=[I("path",{fill:"currentColor",d:"m64 448l832-320l-128 704l-446.08-243.328L832 192L242.816 545.472zm256 512V657.024L512 768z"},null,-1)])])}var _e={name:"ep-promotion",render:Ae};const we={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"};function Me(x,g){return M(),k("svg",we,[...g[0]||(g[0]=[I("path",{fill:"currentColor",d:"M340.864 149.312a30.59 30.59 0 0 0 0 42.752L652.736 512L340.864 831.872a30.59 30.59 0 0 0 0 42.752a29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"},null,-1)])])}var ye={name:"ep-arrow-right",render:Me};const he={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"};function Ee(x,g){return M(),k("svg",he,[...g[0]||(g[0]=[I("path",{fill:"currentColor",d:"M609.408 149.376L277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0a30.59 30.59 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.59 30.59 0 0 0 0-42.688a29.12 29.12 0 0 0-41.728 0"},null,-1)])])}var be={name:"ep-arrow-left",render:Ee},R={exports:{}};(function(x,g){(function(y,u){x.exports=u()})(ve,function(){function y(e){var p=[];return e.AMapUI&&p.push(u(e.AMapUI)),e.Loca&&p.push(N(e.Loca)),Promise.all(p)}function u(e){return new Promise(function(p,a){var t=[];if(e.plugins)for(var l=0;l<e.plugins.length;l+=1)n.AMapUI.plugins.indexOf(e.plugins[l])==-1&&t.push(e.plugins[l]);if(i.AMapUI===o.failed)a("\u524D\u6B21\u8BF7\u6C42 AMapUI \u5931\u8D25");else if(i.AMapUI===o.notload){i.AMapUI=o.loading,n.AMapUI.version=e.version||n.AMapUI.version,l=n.AMapUI.version;var m=document.body||document.head,c=document.createElement("script");c.type="text/javascript",c.src="https://webapi.amap.com/ui/"+l+"/main.js",c.onerror=function(r){i.AMapUI=o.failed,a("\u8BF7\u6C42 AMapUI \u5931\u8D25")},c.onload=function(){if(i.AMapUI=o.loaded,t.length)window.AMapUI.loadUI(t,function(){for(var r=0,_=t.length;r<_;r++){var F=t[r].split("/").slice(-1)[0];window.AMapUI[F]=arguments[r]}for(p();d.AMapUI.length;)d.AMapUI.splice(0,1)[0]()});else for(p();d.AMapUI.length;)d.AMapUI.splice(0,1)[0]()},m.appendChild(c)}else i.AMapUI===o.loaded?e.version&&e.version!==n.AMapUI.version?a("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):t.length?window.AMapUI.loadUI(t,function(){for(var r=0,_=t.length;r<_;r++){var F=t[r].split("/").slice(-1)[0];window.AMapUI[F]=arguments[r]}p()}):p():e.version&&e.version!==n.AMapUI.version?a("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):d.AMapUI.push(function(r){r?a(r):t.length?window.AMapUI.loadUI(t,function(){for(var _=0,F=t.length;_<F;_++){var f=t[_].split("/").slice(-1)[0];window.AMapUI[f]=arguments[_]}p()}):p()})})}function N(e){return new Promise(function(p,a){if(i.Loca===o.failed)a("\u524D\u6B21\u8BF7\u6C42 Loca \u5931\u8D25");else if(i.Loca===o.notload){i.Loca=o.loading,n.Loca.version=e.version||n.Loca.version;var t=n.Loca.version,l=n.AMap.version.startsWith("2"),m=t.startsWith("2");if(l&&!m||!l&&m)a("JSAPI \u4E0E Loca \u7248\u672C\u4E0D\u5BF9\u5E94\uFF01\uFF01");else{l=n.key,m=document.body||document.head;var c=document.createElement("script");c.type="text/javascript",c.src="https://webapi.amap.com/loca?v="+t+"&key="+l,c.onerror=function(r){i.Loca=o.failed,a("\u8BF7\u6C42 AMapUI \u5931\u8D25")},c.onload=function(){for(i.Loca=o.loaded,p();d.Loca.length;)d.Loca.splice(0,1)[0]()},m.appendChild(c)}}else i.Loca===o.loaded?e.version&&e.version!==n.Loca.version?a("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):p():e.version&&e.version!==n.Loca.version?a("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):d.Loca.push(function(r){r?a(r):a()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var o;(function(e){e.notload="notload",e.loading="loading",e.loaded="loaded",e.failed="failed"})(o||(o={}));var n={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},i={AMap:o.notload,AMapUI:o.notload,Loca:o.notload},d={AMap:[],AMapUI:[],Loca:[]},B=[],$=function(e){typeof e=="function"&&(i.AMap===o.loaded?e(window.AMap):B.push(e))};return{load:function(e){return new Promise(function(p,a){if(i.AMap==o.failed)a("");else if(i.AMap==o.notload){var t=e.key,l=e.version,m=e.plugins;t?(window.AMap&&location.host!=="lbs.amap.com"&&a("\u7981\u6B62\u591A\u79CDAPI\u52A0\u8F7D\u65B9\u5F0F\u6DF7\u7528"),n.key=t,n.AMap.version=l||n.AMap.version,n.AMap.plugins=m||n.AMap.plugins,i.AMap=o.loading,l=document.body||document.head,window.___onAPILoaded=function(r){if(delete window.___onAPILoaded,r)i.AMap=o.failed,a(r);else for(i.AMap=o.loaded,y(e).then(function(){p(window.AMap)}).catch(a);B.length;)B.splice(0,1)[0]()},m=document.createElement("script"),m.type="text/javascript",m.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+n.AMap.version+"&key="+t+"&plugin="+n.AMap.plugins.join(","),m.onerror=function(r){i.AMap=o.failed,a(r)},l.appendChild(m)):a("\u8BF7\u586B\u5199key")}else if(i.AMap==o.loaded)if(e.key&&e.key!==n.key)a("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(e.version&&e.version!==n.AMap.version)a("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{if(t=[],e.plugins)for(l=0;l<e.plugins.length;l+=1)n.AMap.plugins.indexOf(e.plugins[l])==-1&&t.push(e.plugins[l]);t.length?window.AMap.plugin(t,function(){y(e).then(function(){p(window.AMap)}).catch(a)}):y(e).then(function(){p(window.AMap)}).catch(a)}else if(e.key&&e.key!==n.key)a("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(e.version&&e.version!==n.AMap.version)a("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{var c=[];if(e.plugins)for(l=0;l<e.plugins.length;l+=1)n.AMap.plugins.indexOf(e.plugins[l])==-1&&c.push(e.plugins[l]);$(function(){c.length?window.AMap.plugin(c,function(){y(e).then(function(){p(window.AMap)}).catch(a)}):y(e).then(function(){p(window.AMap)}).catch(a)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,n={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},i={AMap:o.notload,AMapUI:o.notload,Loca:o.notload},d={AMap:[],AMapUI:[],Loca:[]}}}})})(R);var Ie=R.exports;const Fe={class:"coordinate-acquisition-wraper"},Ce={class:"style-change"},Le=Z({__name:"Index",setup(x){const g=V(!0),y=V(!1),u=Q({keyword:"",coordinates:["116.303843,39.983412","116.407012,39.992093"],start:"116.303843,39.983412",end:"116.407012,39.992093",result:"",style:"light"}),N=[{label:"\u5E7B\u5F71\u9ED1",value:"dark"},{label:"\u6708\u5149\u94F6",value:"light"},{label:"\u8FDC\u5C71\u9EDB",value:"whitesmoke"},{label:"\u8349\u8272\u9752",value:"fresh"},{label:"\u96C5\u58EB\u7070",value:"grey"},{label:"\u6D82\u9E26",value:"graffiti"},{label:"\u9A6C\u5361\u9F99",value:"macaron"},{label:"\u975B\u9752\u84DD",value:"blue"},{label:"\u6781\u591C\u84DD",value:"darkblue"},{label:"\u9171\u7C7D",value:"wine"}];var o=null,n=null,i=null;const d=V(-1),B={coordinate:[{required:!0,message:"\u8BF7\u8F93\u5165\u7ECF\u7EAC\u5EA6"}]},$=X(()=>JSON.stringify(u.coordinates.map(f=>f.split(",").map(s=>+s)))),e=V(null);Y(()=>{r()});const p=()=>{e.value.innerHTML=""},a=()=>{u.keyword&&i.search(u.keyword)},t=()=>{let f="amap://styles/"+u.style;o.setMapStyle(f)},l=f=>{d.value===f?d.value=-1:d.value=f},m=f=>{u.coordinates.splice(f,1)};var c;const r=()=>{Ie.load({key:"523c9fc07c690089f319101a72c2c13e",version:"2.0Beta",plugins:["AMap.DragRoute","AMap.PlaceSearch"]}).then(f=>{c=f,o=new f.Map("coordinate-acquisition",{zoom:5,mapStyle:`amap://styles/${u.style}`}),i=new f.PlaceSearch({pageSize:5,pageIndex:1,map:o,panel:"search-result",autoFitView:!0}),i.on("markerClick",()=>{o.setZoom(15)}),o.on("click",s=>{d.value!==-1&&(u.coordinates[d.value]=`${s.lnglat.lng},${s.lnglat.lat}`)})}).catch(f=>{console.log(f)})},_=V(null),F=()=>{_.value.validate(f=>{if(f){y.value=!0,n&&n.destroy();let s=u.coordinates.map(C=>C.split(","));n=new c.DragRoute(o,s,c.DrivingPolicy.LEAST_DISTANCE),n.search(),n.on("complete",({data:C,target:U})=>{y.value=!1,d.value=-1,u.coordinates=U._path.map(h=>`${h.lng},${h.lat}`);let D=n.getRoute(),L=D.map(h=>[h.lat,h.lng]);u.result=JSON.stringify(L);let b="font-size: 20px; font-weight: bold;font-family: \u5FAE\u8F6F\u96C5\u9ED1; color: #fff; text-shadow: 0 0 3px rgba(0, 0, 0, 1);";console.clear(),console.log("%c\u884C\u8F66\u8DEF\u7EBF\u5BF9\u8C61  \u2193",b),console.log(C),console.log("%c\u884C\u8F66\u8DEF\u7EBF\u6570\u7EC4  \u2193",b),console.log(D),console.log("%c\u884C\u8F66\u8DEF\u7EBF\u7ECF\u7EAC\u5EA6  \u2193",b),console.log(L),console.log("%c\u884C\u8F66\u8DEF\u7EBF\u7ECF\u7EAC\u5EA6JSON\u4E32  \u2193",b),console.log(u.result)}),n.on("addway",({target:C})=>{d.value=-1,u.coordinates=C._path.map(U=>`${U.lng},${U.lat}`)})}})};return(f,s)=>{const C=be,U=ye,D=me,L=se,b=re,h=te,T=_e,H=ie,K=ue,W=le,G=oe("loading");return ee((M(),k("div",Fe,[I("div",{class:q(["filter-wrap",{expand:g.value}])},[v(D,{onClick:s[0]||(s[0]=A=>g.value=!g.value)},{default:E(()=>[g.value?(M(),S(C,{key:0})):(M(),S(U,{key:1}))]),_:1}),v(H,{class:"custom-scrollbar",model:u,ref_key:"form",ref:_,"label-width":"100"},{default:E(()=>[v(h,{label:"\u9009\u62E9\u5B9A\u4F4D\u4F4D\u7F6E"},{default:E(()=>[v(L,{type:"text",modelValue:u.keyword,"onUpdate:modelValue":s[1]||(s[1]=A=>u.keyword=A),onKeyup:ne(a,["native","enter"]),placeholder:"\u8BF7\u8F93\u5165\u4F4D\u7F6E",clearable:"",onClear:p},null,8,["modelValue"]),v(b,{icon:O(pe),type:"primary",onClick:a},null,8,["icon"])]),_:1}),(M(!0),k(z,null,j(u.coordinates,(A,w)=>(M(),S(h,{label:`\u7ECF\u7EAC\u5EA6${w+1}`,key:w,rules:B.coordinate,prop:`coordinates.${w}`},{default:E(()=>[v(L,{type:"text",modelValue:u.coordinates[w],"onUpdate:modelValue":P=>u.coordinates[w]=P,icon:"md-navigate",placeholder:"\u8BF7\u8F93\u5165\u7ECF\u7EAC\u5EA6"},{suffix:E(()=>[v(D,{size:20,onClick:P=>l(w),color:d.value===w?"#409eff":""},{default:E(()=>[v(T)]),_:1},8,["onClick","color"])]),_:2},1032,["modelValue","onUpdate:modelValue"]),u.coordinates.length>2?(M(),S(b,{key:0,icon:O(de),type:"danger",onClick:P=>m(w)},null,8,["icon","onClick"])):J("",!0),u.coordinates.length<15?(M(),S(b,{key:1,icon:O(ce),type:"primary",onClick:P=>{u.coordinates.splice(w+1,0,""),d.value=w+1}},null,8,["icon","onClick"])):J("",!0)]),_:2},1032,["label","rules","prop"]))),128)),v(b,{type:"primary",onClick:F},{default:E(()=>[...s[5]||(s[5]=[ae("\u67E5\u8BE2\u8DEF\u7EBF",-1)])]),_:1}),v(h,{label:"\u7ECF\u7EAC\u5EA6\u6BB5\u5750\u6807"},{default:E(()=>[v(L,{type:"textarea",modelValue:$.value,"onUpdate:modelValue":s[2]||(s[2]=A=>$.value=A),readonly:"",rows:2},null,8,["modelValue"])]),_:1}),v(h,{label:"\u8FD4\u56DE\u8DEF\u7EBF\u5750\u6807"},{default:E(()=>[v(L,{type:"textarea",modelValue:u.result,"onUpdate:modelValue":s[3]||(s[3]=A=>u.result=A),readonly:"",rows:3},null,8,["modelValue"])]),_:1}),s[6]||(s[6]=I("p",null,"\u53EF\u5728\u63A7\u5236\u53F0\u67E5\u770B\u5B8C\u6574\u8DEF\u7EBF\u5BF9\u8C61",-1))]),_:1},8,["model"])],2),I("div",Ce,[s[7]||(s[7]=I("span",null,"\u5730\u56FE\u4E3B\u9898\uFF1A",-1)),v(W,{modelValue:u.style,"onUpdate:modelValue":s[4]||(s[4]=A=>u.style=A),onChange:t},{default:E(()=>[(M(),k(z,null,j(N,(A,w)=>v(K,{label:A.label,value:A.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),I("div",{class:"search-result custom-scrollbar",id:"search-result",ref_key:"searchResult",ref:e},null,512),I("div",{class:q(["coordinate-acquisition",{active:d.value!==-1}]),id:"coordinate-acquisition"},null,2)])),[[G,y.value]])}}});var We=fe(Le,[["__scopeId","data-v-5ac02676"]]);export{We as default};
